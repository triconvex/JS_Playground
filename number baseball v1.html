<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>number baseball</title>
</head>
<body>
    <h1> 숫자야구 게임!</h1>
    <div>
        세 자리 수를 입력하세요! : 
        <input type = "text" id = "answer">
        <button onclick = "nb.main(nb.saveRandom)">정답제출</button><br><br>
    </div>

    <div id= "results"></div>

    <script>
    
    var nb = {};

    nb.generateRandom = function (){ 
        var result = [];
        result[0] = Math.floor(Math.random() * 9) + 1;
        do {
            result[1] = Math.floor(Math.random() * 9) + 1;
        } while (result[0] === result[1]);
        do {
            result[2] = Math.floor(Math.random() * 9) + 1;
        } while (result[2] === result[1] || result[2] === result[0]);
        return result;
    }

    nb.generateAnswer = function (){
        var answer = document.getElementById('answer').value;
        answer = answer.split('');
        var result = [];
        result[0] = Number(answer[0]);
        result[1] = Number(answer[1]);
        result[2] = Number(answer[2]);
        return result;
    }

    nb.countAnswer = function (randomArray){
        var random = randomArray;
        var answer = this.generateAnswer();
        var count = [];
        var first = this.countFirst(random[0],answer);
        var second = this.countSecond(random[1],answer);
        var third = this.countThird(random[2],answer);
        count[0] = first[0] + second[0] + third[0];
        count[1] = first[1] + second[1] + third[1];
        count[2] = first[2] + second[2] + third[2];
        return count;
    }

    nb.countFirst = function (n1,ans){
        var answer = ans;
        var result = [0,0,0];
        if (n1 === answer[0]) {
            result[0] ++;
        } else if (n1 === answer[1] || n1 === answer[2]) {
            result[1] ++;
        } else {
            result[2] ++;
        }
        return result;
    }

    nb.countSecond = function (n1,ans){
        var answer = ans;
        var result = [0,0,0];
        if (n1 === answer[1]) {
            result[0]++;
        } else if (n1 === answer[0] || n1 === answer[2]) {
            result[1]++;
        } else {
            result[2]++;
        }
        return result;
    }

    nb.countThird = function (n1,ans){
        var answer = ans;
        var result = [0,0,0];
        if (n1 === answer[2]) {
            result[0]++;
        } else if (n1 === answer[0] || n1 === answer[1]) {
            result[1]++;
        } else {
            result[2]++;
        }
        return result;
    }

    nb.makeHint = function(result){
        var str = {};
        str = "[현재 스코어 : " + result[0] + " 스트라이크 " + result[1] + " 볼 " + result[2] + " 낫싱]";
        return str;
    }
    
    
    nb.saveRandom = nb.generateRandom();

    nb.main = function (random){
        var answer = document.getElementById('answer').value;
        var result = this.countAnswer(random);
        var hint = this.makeHint(result);
        var print = document.getElementById('results');
        print.innerHTML += "제출답안 : " + answer + " " + hint + "<br>";
        if (result[0] === 3) {
            alert("정답");
            print.innerHTML += "정답입니다!";
        }
   }

//네임스페이스 패턴(?)
//이 경우 this. 사용하여 참조하면 안된다...? 추후에 문제(?)
    </script>
   
</body>
</html>

